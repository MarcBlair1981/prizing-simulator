<!doctype html>
<meta charset="utf-8">
<title id="pageTitle">F2P – Interactive Odds Demo (SPLASH Tech, v3.0)</title>
<link rel="stylesheet" href="style.css">
<!-- Add Inter font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<div class="brandbar" oncontextmenu="return false">
  <div class="brandwrap">
    <div class="brandlogo"><img id="brandLogo" alt="SPLASH Tech" draggable="false"></div>
    <div>
      <div class="brandname" id="brandName">SPLASH Tech</div>
      <div class="brandsub" id="brandSub">Free-to-Play Projection Tools</div>
    </div>
    <div style="margin-left:auto" class="brandsub" id="version">v3.0</div>
  </div>
</div>
<div class="wm" id="wm"></div>

<div class="wrap">
  <h2 style="margin:0 0 6px 0" id="mainHeader">F2P – Interactive Odds Demo</h2>
  <div class="muted" id="introText">Enter question text and decimal odds for the <b>optimal pick</b>. Use the controls
    to project
    winners and the full score distribution.</div>

  <div class="grid g2" style="margin-top:12px">
    <div class="card">
      <div class="muted" id="participantsLabel">Participants</div>
      <input id="participants" type="number" min="100" step="100" value="1000">
      <div class="muted" style="margin-top:8px" id="questionsCountLabel">Number of questions</div>
      <input id="qcount" type="number" min="1" max="50" step="1" value="6">

      <div class="muted" style="margin-top:8px" id="gameTemplateLabel">Game Template</div>
      <select id="gameTemplate" style="margin-bottom:8px">
        <option value="" id="selectTemplatePlaceholder">(Select a template)</option>
      </select>

      <div class="muted" id="questionTemplateLabel">Question template</div>
      <input id="template" list="templates" type="text" placeholder="Type or choose (auto-fills when you add rows)">
      <datalist id="templates">
        <option>Which team will win the match?</option>
        <option>Will both teams score?</option>
        <option>Who will win the fight?</option>
        <option>How many Touchdowns will be scored?</option>
        <option>Will Erling Haaland score?</option>
        <option>Will Lamine Yamal score or assist?</option>
        <option>How many corners will be taken?</option>
        <option>How many shots on target for [Player]?</option>
        <option>How many tackles will [Player] make?</option>
        <option>In what minute will the first goal be scored?</option>
        <option>Which listed player will receive a yellow card?</option>
        <option>How many passes will [Player] complete?</option>
      </datalist>
    </div>

    <div class="card">
      <div class="muted row hidden" id="oddsMultiplierRow"
        title="Multiplies each DECIMAL odd before converting to probability (p = 1/(odds × multiplier)). Lower = easier; Higher = harder.">
        <span id="oddsMultiplierLabel">Odds multiplier</span><span class="pill" id="multDisp">×1.00</span>
      </div>
      <div class="row hidden" style="margin-top:6px"><input id="mult" type="range" min="0.50" max="2.00" step="0.01"
          value="1.00"></div>

      <div class="muted" style="margin-top:10px" id="quickActionsLabel">Quick actions</div>
      <div class="row" style="margin-top:6px">
        <button id="addRow" class="btn">Add question</button>
        <button id="clearRows" class="btn">Clear all</button>
        <button id="example" class="btn">Load example</button>
        <button id="export" class="btn">Export JSON</button>
        <button id="loadCSV" class="btn">Load CSV</button>
        <input type="file" id="csvFileInput" accept=".csv" style="display:none">
        <label class="row" style="margin-left:auto;gap:6px;align-items:center">
          <input id="toggleImplied" type="checkbox" checked>
          <span class="muted" id="showImpliedLabel">Show Implied Odds</span>
        </label>
      </div>

      <div class="muted" style="margin-top:10px" id="bulkOperationsLabel">Bulk Operations</div>
      <div class="row" style="margin-top:6px;gap:8px">
        <select id="uniformOddsSelect"
          style="max-width:180px;background:#0b152a;color:var(--text);border:1px solid var(--line);border-radius:10px;padding:8px 10px"></select>
        <button id="applyUniform" class="btn">Apply Uniform Odds</button>
      </div>
      <div class="muted" style="margin-top:12px" id="paytablePresetsLabel">Paytable presets</div>
      <div class="row" style="gap:8px;margin-top:6px">
        <select id="presetSelect"
          style="min-width:220px;background:#0b152a;color:var(--text);border:1px solid var(--line);border-radius:10px;padding:8px 10px"></select>
        <label class="row" style="gap:6px;align-items:center">
          <input id="applyStructure" type="checkbox" checked>
          <span class="muted" id="applyStructureLabel">Apply structure (N & odds)</span>
        </label>
        <button id="previewPreset" class="btn">Preview</button>
        <button id="applyPreset" class="btn">Apply</button>
      </div>
      <div id="presetPreview" class="muted" style="margin-top:8px"></div>

      <div id="status" class="muted" style="margin-top:6px"></div>
    </div>
  </div>

  <div class="card" style="margin-top:12px">
    <div class="muted" id="questionsListLabel">Questions (type to edit; odds = decimal for optimal pick)</div>
    <div id="qlist"></div>
  </div>

  <div class="grid g3" style="margin-top:12px">
    <div class="card">
      <div class="muted" id="statQuestions">Questions</div>
      <div id="qstat" class="big">–</div>
    </div>
    <div class="card">
      <div class="muted" id="statProb">Combined optimal-path probability</div>
      <div id="comb" class="big">–</div>
    </div>
    <div class="card">
      <div class="muted"><span id="statWinners">Expected perfect winners @</span> <span id="pdisp"></span></div>
      <div id="winners" class="big">–</div>
    </div>
  </div>

  <div class="card" style="margin-top:12px">
    <div class="muted" id="distTableLabel">Expected users at each score (Poisson–binomial, independent questions)</div>
    <table class="table" id="dist"></table>
  </div>

  <div class="card" style="margin-top:12px;position:relative">
    <div class="muted chart-title" style="margin-bottom:6px" id="chartSectionTitle">
      <b>Score distribution</b> — X: score (0..N), Y: % of users. Line = CDF (≤ score).
    </div>
    <svg id="chart" class="chart" viewBox="0 0 1000 320" preserveAspectRatio="none"></svg>
    <div id="tt" class="tooltip" style="display:none"></div>
  </div>
</div>

<script src="config.js"></script>
<script src="presets.js"></script>
<script src="script.js"></script>